
<!DOCTYPE html>
<html lang="en">
<head>
  <script src="https://www.walknsqualk.com/js/theme.min.js" integrity="sha384-pb++s6uBRKaQv+iAXpgA/H3IlpLZdO14tTwuCI7uXmz4aaZdByoCcM+6BhynMq/1"></script>
  <link rel="stylesheet" href="https://www.walknsqualk.com/abridge.css?h=f3cf078b0dda0efcc1e1" />
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="base" content="https://www.walknsqualk.com/" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="theme-color" content="#333333" />
  <meta name="msapplication-TileColor" content="#333333" />
  <link rel="manifest" href="https://www.walknsqualk.com/manifest.min.json" />
  <link rel="mask-icon" href="https://www.walknsqualk.com/safari-pinned-tab.svg" color="#ff9900" />
  <link rel="apple-touch-icon" sizes="180x180" href="https://www.walknsqualk.com/apple-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="https://www.walknsqualk.com/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="https://www.walknsqualk.com/favicon-16x16.png" />
  <link rel="alternate" type="application/atom+xml" title="Walk N&#x27; Squawk Atom Feed" href="https://www.walknsqualk.com/atom.xml" />
  <meta name="robots" content="index, follow" />
  <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  <title>Setting up Let's Encrypt with Hugo | Walk N' Squawk</title>
  <meta name="author" content="Jeff DeWall" />
  <meta name="copyright" content="Walk N&#x27; Squawk" />
  <meta name="description" content="A Zig and Elixir Coding Blog, with some FPGA and Japanese content as well." />
  <link rel="canonical" href="https://www.walknsqualk.com/008-letsencrypt-with-hugo/" />
  <meta name="keywords" content="Zig, Rust, Elixir, Python, Japanese, German, Coding" />
  <meta name="google-site-verification" content="Your Google Site verification code." />
  <meta name="msvalidate.01" content="Your Bing Site verification code." />
  <meta property="og:url" content="https://www.walknsqualk.com/008-letsencrypt-with-hugo/" />
  <meta name="twitter:url" content="https://www.walknsqualk.com/008-letsencrypt-with-hugo/" />
  <meta property="og:description" content="A Zig and Elixir Coding Blog, with some FPGA and Japanese content as well." />
  <meta name="twitter:description" content="A Zig and Elixir Coding Blog, with some FPGA and Japanese content as well." />
  <meta property="og:title" content="Setting up Let&#x27;s Encrypt with Hugo | Walk N&#x27; Squawk" />
  <meta name="twitter:title" content="Setting up Let&#x27;s Encrypt with Hugo | Walk N&#x27; Squawk" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image" content="https://www.walknsqualk.com/banner.png" />
  <meta property="og:image" content="https://www.walknsqualk.com/banner.png" />
  <meta property="og:site_name" content="Walk N&#x27; Squawk" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:type" content="website" />
  <meta property="og:updated_time" content="2018-02-21" />
  <meta name="twitter:site" content="@your-user-name" />
  <meta name="twitter:creator" content="@your-user-name" />
  <script defer src="https://www.walknsqualk.com/js/abridge.min.js?h=e0f9a881a665c86cce9c" integrity="sha384-QF67y7RnPkuDrJNQqn3/7nYxqxWkW/qHI7zN0WTES1aXbf+TotoByRBb835fUE6U"></script>
  <noscript><link rel="stylesheet" href="https://www.walknsqualk.com/nojs.css" /></noscript>
</head>
<body>
  <header>
    <nav>
      <div><big><a href="https://www.walknsqualk.com" title="Walk N&#x27; Squawk"><img src="https://www.walknsqualk.com//logo.png" alt="WalkNSqualk" width="48" height="48" /> Walk N' Squalk</a></big></div>
      <div>

        <div>
          <ul><li><a class="s110" href="https://www.walknsqualk.com/archive/"> Posts </a></li><li><a class="s110" href="https://www.walknsqualk.com/tags/"> Tags </a></li><li><i type="reset" id="mode" class="js svgs adjust"></i></ul>
        </div>

        <div>
          <div>
            <form autocomplete=off class="js" name="goSearch" id="searchbox">
              <div class="searchd">
                <input id="searchinput" type="text" placeholder="Search" title="Search" />
                <button type="submit" title="Search" class="svgs svgm search"></button>
              </div>
              <div class="results"><div id="suggestions"></div></div>
            </form>
          </div>
        </div>

      </div>
    </nav>
    <hr />
  </header>
  <main>
    <article>
      <h1><a href="https://www.walknsqualk.com/008-letsencrypt-with-hugo/">Setting up Let&#x27;s Encrypt with Hugo</a></h1>

      <span class="s95"> Jeff DeWall <span class="rpad"></span> 2 min read <span class="rpad"></span> February 21, 2018 <span class="rpad"></span></span>

    


<p>I finally got around to setting up HTTPS with a free TLS certificate for the blog.  As I've mentioned before I mostly use Windows as my daily driver and love using WSL for a native bash/linux experience.  Of course this isn't flawless and sometimes this rears its ugly head.  In particular Let's Encrypts' tool <code>letsencrypt-auto</code> won't work under WSL.  It seems to be due to a python package trying to execute code on the stack, which is a security vulnerability that WSL disallows, according to <a rel="noopener" target="_blank" href="https://github.com/Microsoft/WSL/issues/2553">this github issue</a>.</p>
<p>I ended up creating a simple virtual machine with Vagrant in order to run let's encrypt and get a certificate generated.  It actually took me longer than I originally expected, given that there are quite a few articles on setting this up.  I followed <a rel="noopener" target="_blank" href="https://about.gitlab.com/2016/04/11/tutorial-securing-your-gitlab-pages-with-tls-and-letsencrypt/">this article</a> that talks specifically about GitLab, where this blog is hosted.  It, however, deals with Jekyll and not Hugo, and it took a few extra non-obvious steps to get things working.</p>
<p>Once you run <code>letsencrypt-auto certonly --manual -d &lt;domain name&gt;</code>, it expects you to setup a page with a token to verify that you are the owner of the domain.  I ended up creating a new section by creating a folder under content called 'letsencrypt' and placed a single article 'token.md' under it. In that file I placed the following:</p>
<pre class="z-code"><code><span class="z-text z-plain">+++
</span><span class="z-text z-plain">url = &quot;&lt;url that letsencrypt-auto is going to look for&gt;&quot;
</span><span class="z-text z-plain">layout = &quot;rawtext&quot;
</span><span class="z-text z-plain">+++
</span><span class="z-text z-plain">&lt;token that letsencrypt-auto wants to find&gt;
</span></code></pre>
<p>I then created a layouts/letsencrypt/rawtext.html file in the base of my blog project with the following</p>
<pre class="z-code"><code><span class="z-text z-plain">{{ .Plain }}
</span></code></pre>
<p>The last step, which took me longer than it should have, was to turn off auto-lower casing of urls in site wide config (config.toml):</p>
<pre class="z-code"><code><span class="z-text z-plain">...
</span><span class="z-text z-plain">disablePathToLower = true
</span><span class="z-text z-plain">...
</span></code></pre>
<p>With that I was able to generate the certificates that I needed and setup the domain information on Gitlab.</p>
<div id="commento"></div>
<script src="https://cdn.commento.io/js/commento.js"></script>

      <nav>
        <div>
          <a href="https://www.walknsqualk.com/009-learning-japanese-kanji/">&#8249; Learning the Jouyou Kanji</a>
        </div>
        <div>
          <a href="https://www.walknsqualk.com/007-multiple-android-builds-xamarin-forms/"> Multiple Android builds on Xamarin Forms &#8250;</a>
        </div>
      </nav>
    </article>
  </main>
  <footer>
    <hr />
    <div class="c">
      <nav class="tpad"><div><a type="application/atom+xml" href="https://www.walknsqualk.com/atom.xml" target="_blank" title="Walk N&#x27; Squawk Atom Feed"><i type="Button" class="svg rss" title="Walk N&#x27; Squawk Atom Feed"></i></a><a class="js m-protected" href="#c3JqaWxhcmlvdXNAZmFzdG1haWwubmV0" target="_blank" title="Mail"><i type="Button" class="svg mail" title="Mail"></i></a><a href="https://mastodon.social/@srjilarious" target="_blank" title="Mastodon" rel="me"><i type="Button" class="svg mastodon" title="Mastodon"></i></a><a href="https://gitlab.com/sr.jilarious/" target="_blank" title="Gitlab"><i type="Button" class="svg gitlab" title="Gitlab"></i></a><a href="https://github.com/srjilarious/" target="_blank" title="Github"><i type="Button" class="svg github" title="Github"></i></a></div></nav>
      <nav class="vpad">
        <a class="rpad s90" href="https://www.walknsqualk.com/about/"> About </a>
        <a class="rpad s90" href="https://www.walknsqualk.com/contact/"> Contact </a>
        <a class="rpad s90" href="https://www.walknsqualk.com/privacy/"> Privacy </a>
        <a class="rpad s90" href="https://www.walknsqualk.com/sitemap.xml" target="_blank"> Sitemap </a>
      </nav>
      <p class="s80"> &copy; <span id="year">2025</span> Walk N' Squawk</p>
      <p class="s80">Powered by <a href="https://www.getzola.org/" target="_blank">Zola</a> & <a href="https://github.com/jieiku/abridge/" target="_blank">Abridge</a></p>
    </div>
  </footer>
</body>
</html>
